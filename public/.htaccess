# .htaccess file for Apache servers
# Redirect old .html URLs to new clean URLs

RewriteEngine On

# Force HTTPS (optional)
# RewriteCond %{HTTPS} off
# RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Remove trailing slash (optional)
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)/$ /$1 [R=301,L]

# Specific redirects for main pages
RewriteRule ^index\.html$ / [R=301,L]
RewriteRule ^home\.html$ / [R=301,L]
RewriteRule ^about\.html$ /about [R=301,L]
RewriteRule ^contact\.html$ /contact [R=301,L]
RewriteRule ^tours\.html$ /tours [R=301,L]
RewriteRule ^blog\.html$ /blog [R=301,L]
RewriteRule ^privacy\.html$ /privacy [R=301,L]
RewriteRule ^terms\.html$ /terms [R=301,L]

# Redirect old tour pages
RewriteRule ^tour-details\.html$ /tours [R=301,L]
RewriteRule ^golden-triangle\.html$ /tour-details/golden-triangle-classic [R=301,L]
RewriteRule ^rajasthan-tour\.html$ /tour-details/rajasthan-royal-heritage [R=301,L]
RewriteRule ^incredible-india\.html$ /tour-details/incredible-india-journey [R=301,L]

# Redirect old blog posts
RewriteRule ^blog/golden-triangle-guide\.html$ /blog/complete-golden-triangle-travel-guide-2025 [R=301,L]
RewriteRule ^blog/rajasthan-travel\.html$ /blog/best-time-visit-rajasthan-complete-guide [R=301,L]
RewriteRule ^blog/delhi-hidden-gems\.html$ /blog/hidden-gems-delhi-local-guide [R=301,L]
RewriteRule ^blog/jaipur-food\.html$ /blog/jaipur-food-guide-authentic-rajasthani-cuisine [R=301,L]
RewriteRule ^blog/india-culture\.html$ /blog/cultural-etiquette-guide-india-travelers [R=301,L]
RewriteRule ^blog/photography-tips\.html$ /blog/photography-tips-india-travel-guide [R=301,L]
RewriteRule ^blog/solo-female-travel\.html$ /blog/solo-female-travel-india-safety-guide [R=301,L]
RewriteRule ^blog/sustainable-tourism\.html$ /blog/sustainable-tourism-rajasthan-responsible-travel [R=301,L]

# Generic rule: remove .html extension from any URL
RewriteRule ^(.*)\.html$ /$1 [R=301,L]

# Handle SPA routing - send all requests to index.html
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.html [L]

# Cache static assets
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType text/css "access plus 1 month"
    ExpiresByType application/javascript "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType image/jpg "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType image/svg+xml "access plus 1 month"
    ExpiresByType image/webp "access plus 1 month"
</IfModule>

# Security headers
<IfModule mod_headers.c>
    Header always set X-Content-Type-Options nosniff
    Header always set X-Frame-Options DENY
    Header always set X-XSS-Protection "1; mode=block"
    Header always set Referrer-Policy "strict-origin-when-cross-origin"
    Header always set Permissions-Policy "camera=(), microphone=(), geolocation=()"
</IfModule>
